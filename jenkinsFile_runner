node {

def scmUrl, username, password,commitHash

withCredentials([usernamePassword(credentialsId: '0bf97e9d-ff63-48c7-a37b-c294c74d5c3d', passwordVariable: 'GIT_PASSWORD', usernameVariable: 'GIT_USERNAME')]) {
	
	

    //sh("git url: https://Ngschumacher:7wDV75NFKfuq@github.com/Ngschumacher/Timelog.git")
	script {
		scmUrl = scm.getUserRemoteConfigs()[0].getUrl()
		def commit =  scm.GIT_COMMIT
		
		
		
		def scmVars = checkout scm
         commitHash = scmVars.GIT_COMMIT
		echo commitHash
	}
	echo scmUrl
	
	username = env.GIT_USERNAME
	password = env.GIT_PASSWORD
	
	
		
		sh("git tag -a some_tag_${BUILD_NUMBER} ${commitHash}  -m 'Jenkins' ")
		//
	}
	scmUrl = scmUrl.replace("https://", "")
	
	sh("git push https://${username}:${password}@${scmUrl} --tags")
	}

