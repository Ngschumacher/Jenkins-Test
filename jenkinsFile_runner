node {

def scmUrl, username, password

withCredentials([usernamePassword(credentialsId: '0bf97e9d-ff63-48c7-a37b-c294c74d5c3d', passwordVariable: 'GIT_PASSWORD', usernameVariable: 'GIT_USERNAME')]) {

	

    //sh("git url: https://Ngschumacher:7wDV75NFKfuq@github.com/Ngschumacher/Timelog.git")
	script {
		scmUrl = scm.getUserRemoteConfigs()[0].getUrl()
	}
	echo scmUrl
	
	username = env.GIT_USERNAME
	password = env.GIT_PASSWORD
	
	
		
		
		sh("git config --global user.email 'you@example.com'")
		sh("git config --global user.name 'Your Name'")
		
		sh("git tag -a some_tag_${BUILD_NUMBER}  -m 'Jenkins'")
		//
	}
	
	echo username
	echo password
	echo scmUrl
	sh("git remote set-url origin $scmUrl")
	sh("git push https://${username}:${password} --tags")
	sh("git push --tags")
	}

